{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../user.service\";\nimport * as i3 from \"../auth-service.service\";\nimport * as i4 from \"@angular/common\";\nfunction ProfileComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.user.user.first_name, \" \", ctx_r0.user.user.last_name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Email: \", ctx_r0.user.user.email, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Phone: \", ctx_r0.user.user.phone, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Address: \", ctx_r0.user.user.address, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"User Type: \", ctx_r0.user.user.user_type, \"\");\n  }\n}\nfunction ProfileComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_div_2_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.becomeHost());\n    });\n    i0.ɵɵtext(2, \"Become Host\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ProfileComponent {\n  constructor(http, userService, authService // Inject the AuthService\n  ) {\n    this.http = http;\n    this.userService = userService;\n    this.authService = authService;\n  }\n  ngOnInit() {\n    this.userService.user$.subscribe(user => {\n      // Ensure user is defined before updating the property\n      if (user) {\n        this.user = user;\n        console.log(user.user.first_name);\n      }\n    });\n  }\n  becomeHost() {\n    const userId = this.user.user_id;\n    // Make a request to the AuthService to become a host\n    this.authService.becomeHost(userId).subscribe(response => {\n      // Handle success\n      this.user.user_type = 'Host';\n      this.userService.updateUser(this.user); // Notify other components about the user update\n    }, error => {\n      // Handle error\n      console.error('Error becoming host:', error);\n      if (error.status === 500) {\n        // Internal Server Error\n        console.error('Internal Server Error. Please try again later.');\n        // Display a user-friendly message to the user, e.g., using a toast or alert\n      } else if (error.status === 404) {\n        // Not Found\n        console.error('User not found. Please check the user ID.');\n        // Display a user-friendly message to the user\n      } else {\n        // Other error\n        console.error('An unexpected error occurred.');\n        // Display a user-friendly message to the user\n      }\n    });\n  }\n  static #_ = this.ɵfac = function ProfileComponent_Factory(t) {\n    return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileComponent,\n    selectors: [[\"app-profile\"]],\n    inputs: {\n      user: \"user\"\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[1, \"profile\"], [\"class\", \"profile-info\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"profile-info\"], [3, \"click\"]],\n    template: function ProfileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ProfileComponent_div_1_Template, 11, 6, \"div\", 1);\n        i0.ɵɵtemplate(2, ProfileComponent_div_2_Template, 3, 0, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.user);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.user && ctx.user.user.user_type === \"UUser\");\n      }\n    },\n    dependencies: [i4.NgIf],\n    styles: [\".profile[_ngcontent-%COMP%] {\\n  border: 1px solid #ccc;\\n  padding: 15px;\\n  margin: 10px;\\n  border-radius: 5px;\\n}\\n\\n.profile-info[_ngcontent-%COMP%] {\\n  margin-bottom: 15px;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  background-color: #4caf50;\\n  color: white;\\n  padding: 10px;\\n  border: none;\\n  border-radius: 5px;\\n  cursor: pointer;\\n}\\n\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: #45a049;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZmlsZS9wcm9maWxlLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxzQkFBc0I7RUFDdEIsYUFBYTtFQUNiLFlBQVk7RUFDWixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtFQUNaLGFBQWE7RUFDYixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7QUFDM0IiLCJzb3VyY2VzQ29udGVudCI6WyIucHJvZmlsZSB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBwYWRkaW5nOiAxNXB4O1xyXG4gIG1hcmdpbjogMTBweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuXHJcbi5wcm9maWxlLWluZm8ge1xyXG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XHJcbn1cclxuXHJcbmJ1dHRvbiB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzRjYWY1MDtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDVhMDQ5O1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate2","ctx_r0","user","first_name","last_name","ɵɵtextInterpolate1","email","phone","address","user_type","ɵɵlistener","ProfileComponent_div_2_Template_button_click_1_listener","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","becomeHost","ProfileComponent","constructor","http","userService","authService","ngOnInit","user$","subscribe","console","log","userId","user_id","response","updateUser","error","status","_","ɵɵdirectiveInject","i1","HttpClient","i2","UserService","i3","AuthService","_2","selectors","inputs","decls","vars","consts","template","ProfileComponent_Template","rf","ctx","ɵɵtemplate","ProfileComponent_div_1_Template","ProfileComponent_div_2_Template","ɵɵproperty"],"sources":["C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\profile\\profile.component.ts","C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\profile\\profile.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { AuthService } from '../auth-service.service';\r\nimport { UserService } from '../user.service';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css'],\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  @Input() user: any;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private userService: UserService,\r\n    private authService: AuthService // Inject the AuthService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.userService.user$.subscribe((user) => {\r\n      // Ensure user is defined before updating the property\r\n      if (user) {\r\n        this.user = user;\r\n        console.log(user.user.first_name);\r\n      }\r\n    });\r\n  }\r\n\r\n  becomeHost() {\r\n    const userId = this.user.user_id;\r\n\r\n    // Make a request to the AuthService to become a host\r\n    this.authService.becomeHost(userId).subscribe(\r\n      (response: any) => {\r\n        // Handle success\r\n        this.user.user_type = 'Host';\r\n        this.userService.updateUser(this.user); // Notify other components about the user update\r\n      },\r\n      (error) => {\r\n        // Handle error\r\n        console.error('Error becoming host:', error);\r\n\r\n        if (error.status === 500) {\r\n          // Internal Server Error\r\n          console.error('Internal Server Error. Please try again later.');\r\n          // Display a user-friendly message to the user, e.g., using a toast or alert\r\n        } else if (error.status === 404) {\r\n          // Not Found\r\n          console.error('User not found. Please check the user ID.');\r\n          // Display a user-friendly message to the user\r\n        } else {\r\n          // Other error\r\n          console.error('An unexpected error occurred.');\r\n          // Display a user-friendly message to the user\r\n        }\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"profile\">\r\n  <div class=\"profile-info\" *ngIf=\"user\">\r\n    <h2>{{ user.user.first_name }} {{ user.user.last_name }}</h2>\r\n    <p>Email: {{ user.user.email }}</p>\r\n    <p>Phone: {{ user.user.phone }}</p>\r\n    <p>Address: {{ user.user.address }}</p>\r\n    <p>User Type: {{ user.user.user_type }}</p>\r\n  </div>\r\n\r\n  <div *ngIf=\"user && user.user.user_type === 'UUser'\">\r\n    <button (click)=\"becomeHost()\">Become Host</button>\r\n  </div>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}