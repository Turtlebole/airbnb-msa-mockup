{"ast":null,"code":"import { Emitters } from '../emitters/emitters';\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction NavBarComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"a\", 12)(2, \"button\", 13);\n    i0.ɵɵtext(3, \" Login \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"a\", 14)(5, \"button\", 15);\n    i0.ɵɵtext(6, \"Sign-up\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction NavBarComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"a\", 16)(2, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function NavBarComponent_div_19_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.logout());\n    });\n    i0.ɵɵtext(3, \"Logout\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport class NavBarComponent {\n  constructor(http) {\n    this.http = http;\n    this.authed = false;\n    this.token = localStorage.getItem('token');\n    this.message = ``;\n  }\n  ngOnInit() {\n    Emitters.authEmitter.subscribe(auth => {});\n    if (this.token) {\n      this.getUserData(this.token);\n    } else {\n      this.message = 'No token found. Please log in.';\n      Emitters.authEmitter.emit(false);\n    }\n  }\n  getUserData(token) {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: 'Bearer ' + token\n      }),\n      withCredentials: true\n    };\n    this.http.get('https://localhost/api/user/users/get', httpOptions).subscribe(res => {\n      //  console.log(res);\n      this.message = `Welcome, ${res.user.first_name}`;\n      Emitters.authEmitter.emit(true);\n      this.authed = true;\n    }, err => {\n      console.log(err);\n      this.message = 'You are not logged in';\n      Emitters.authEmitter.emit(false);\n    });\n  }\n  logout() {\n    if (this.token) {\n      this.getUserDataL(this.token);\n      //console.log(this.token)\n    } else {\n      this.message = 'Please log in/Sign in.';\n      Emitters.authEmitter.emit(false);\n    }\n  }\n  getUserDataL(token) {\n    // const httpOptions = {\n    //   headers: new HttpHeaders({\n    //     Authorization: 'Bearer ' + token,\n    //   }),\n    //   withCredentials: true,\n    // };\n    // this.http.post('http://localhost:8000/users/logout', httpOptions).subscribe(res=>{\n    //   this.authed=false\n    //   this.jaje=`aahahahah`\n    //   console.log(res)\n    // })\n    localStorage.removeItem('token');\n    location.reload();\n  }\n  static #_ = this.ɵfac = function NavBarComponent_Factory(t) {\n    return new (t || NavBarComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NavBarComponent,\n    selectors: [[\"app-nav-bar\"]],\n    decls: 21,\n    vars: 3,\n    consts: [[1, \"d-flex\", \"flex-wrap\", \"align-items-center\", \"justify-content-center\", \"justify-content-md-between\", \"py-3\", \"mb-4\", \"border-bottom\"], [1, \"col-md-3\", \"mb-2\", \"mb-md-0\"], [\"href\", \"/\", 1, \"d-inline-flex\", \"link-body-emphasis\", \"text-decoration-none\"], [\"width\", \"40\", \"height\", \"32\", \"role\", \"img\", \"aria-label\", \"Bootstrap\", 1, \"bi\"], [0, \"xlink\", \"href\", \"#bootstrap\"], [1, \"nav\", \"col-12\", \"col-md-auto\", \"mb-2\", \"justify-content-center\", \"mb-md-0\"], [\"href\", \"#\", 1, \"nav-link\", \"px-2\"], [\"routerLink\", \"accommodations\", 1, \"nav-link\", \"px-2\"], [\"routerLink\", \"accommodationsCreate\", 1, \"nav-link\", \"px-2\"], [\"routerLink\", \"profile\", 1, \"nav-link\", \"px-2\"], [\"class\", \"col-md-3 text-end\", 4, \"ngIf\"], [1, \"col-md-3\", \"text-end\"], [\"routerLink\", \"login\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"me-2\"], [\"routerLink\", \"sign-up\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [\"routerLink\", \"\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", \"me-2\", 3, \"click\"]],\n    template: function NavBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\", 0)(1, \"div\", 1)(2, \"a\", 2);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(3, \"svg\", 3);\n        i0.ɵɵelement(4, \"use\", 4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(5, \"ul\", 5)(6, \"li\")(7, \"a\", 6);\n        i0.ɵɵtext(8, \"Home\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"li\")(10, \"a\", 7);\n        i0.ɵɵtext(11, \"Accommodations\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"li\")(13, \"a\", 8);\n        i0.ɵɵtext(14, \"AccommodationsCo\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"li\")(16, \"a\", 9);\n        i0.ɵɵtext(17, \"Profile\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(18, NavBarComponent_div_18_Template, 7, 0, \"div\", 10);\n        i0.ɵɵtemplate(19, NavBarComponent_div_19_Template, 4, 0, \"div\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(20);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", !ctx.authed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.authed);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\\n\", ctx.message, \"\\n\");\n      }\n    },\n    dependencies: [i2.NgIf, i3.RouterLink],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n  static #_3 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: NavBarComponent,\n    factory: NavBarComponent.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["Emitters","HttpHeaders","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","NavBarComponent_div_19_Template_button_click_2_listener","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","logout","NavBarComponent","constructor","http","authed","token","localStorage","getItem","message","ngOnInit","authEmitter","subscribe","auth","getUserData","emit","httpOptions","headers","Authorization","withCredentials","get","res","user","first_name","err","console","log","getUserDataL","removeItem","location","reload","_","ɵɵdirectiveInject","i1","HttpClient","_2","selectors","decls","vars","consts","template","NavBarComponent_Template","rf","ctx","ɵɵnamespaceSVG","ɵɵelement","ɵɵnamespaceHTML","ɵɵtemplate","NavBarComponent_div_18_Template","NavBarComponent_div_19_Template","ɵɵadvance","ɵɵproperty","ɵɵtextInterpolate1","factory","ɵfac","providedIn"],"sources":["C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\nav-bar\\nav-bar.component.ts","C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\nav-bar\\nav-bar.component.html"],"sourcesContent":["import { Component, EventEmitter } from '@angular/core';\r\nimport { Emitters } from '../emitters/emitters';\r\nimport { HttpClient,HttpHeaders } from '@angular/common/http';\r\n\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n@Component({\r\n  selector: 'app-nav-bar',\r\n  templateUrl: './nav-bar.component.html',\r\n  styleUrls: ['./nav-bar.component.css']\r\n})\r\nexport class NavBarComponent {\r\nauthed=false\r\ntoken=localStorage.getItem('token')\r\nmessage=``\r\nconstructor(private http:HttpClient){\r\n}\r\nngOnInit():void{\r\nEmitters.authEmitter.subscribe(\r\n  (auth:boolean)=>{\r\n\r\n  }\r\n);\r\n\r\nif (this.token) {\r\n  this.getUserData(this.token);\r\n} else {\r\n  this.message = 'No token found. Please log in.';\r\n  Emitters.authEmitter.emit(false);\r\n}\r\n}\r\n\r\ngetUserData(token: string): void {\r\nconst httpOptions = {\r\n  headers: new HttpHeaders({\r\n    Authorization: 'Bearer ' + token,\r\n  }),\r\n  withCredentials: true,\r\n};\r\n\r\nthis.http\r\n  .get<any>('https://localhost/api/user/users/get', httpOptions)\r\n  .subscribe(\r\n    (res: any) => {\r\n    //  console.log(res);\r\n      this.message = `Welcome, ${res.user.first_name}`;\r\n      Emitters.authEmitter.emit(true);\r\n      this.authed=true\r\n    },\r\n    (err) => {\r\n      console.log(err);\r\n      this.message = 'You are not logged in';\r\n      Emitters.authEmitter.emit(false);\r\n    }\r\n  );\r\n\r\n\r\n}\r\nlogout():void{\r\n  if (this.token) {\r\n    this.getUserDataL(this.token);\r\n    //console.log(this.token)\r\n  } else {\r\n    this.message = 'Please log in/Sign in.';\r\n    Emitters.authEmitter.emit(false);\r\n  }\r\n  }\r\n  getUserDataL(token: string): void {\r\n    // const httpOptions = {\r\n    //   headers: new HttpHeaders({\r\n    //     Authorization: 'Bearer ' + token,\r\n    //   }),\r\n    //   withCredentials: true,\r\n    // };\r\n// this.http.post('http://localhost:8000/users/logout', httpOptions).subscribe(res=>{\r\n//   this.authed=false\r\n//   this.jaje=`aahahahah`\r\n//   console.log(res)\r\n\r\n// })\r\n\r\nlocalStorage.removeItem('token')\r\nlocation.reload();\r\n\r\n}\r\n}\r\n","<header\r\n  class=\"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom\"\r\n>\r\n  <div class=\"col-md-3 mb-2 mb-md-0\">\r\n    <a href=\"/\" class=\"d-inline-flex link-body-emphasis text-decoration-none\">\r\n      <svg class=\"bi\" width=\"40\" height=\"32\" role=\"img\" aria-label=\"Bootstrap\">\r\n        <use xlink:href=\"#bootstrap\"></use>\r\n      </svg>\r\n    </a>\r\n  </div>\r\n\r\n  <ul class=\"nav col-12 col-md-auto mb-2 justify-content-center mb-md-0\">\r\n    <li><a href=\"#\" class=\"nav-link px-2\">Home</a></li>\r\n    <li>\r\n      <a routerLink=\"accommodations\" class=\"nav-link px-2\">Accommodations</a>\r\n    </li>\r\n    <li>\r\n      <a routerLink=\"accommodationsCreate\" class=\"nav-link px-2\"\r\n        >AccommodationsCo</a\r\n      >\r\n    </li>\r\n    <li><a routerLink=\"profile\" class=\"nav-link px-2\">Profile</a></li>\r\n  </ul>\r\n\r\n  <div class=\"col-md-3 text-end\" *ngIf=\"!authed\">\r\n    <a routerLink=\"login\">\r\n      <button type=\"button\" class=\"btn btn-outline-primary me-2\">\r\n        Login\r\n      </button></a\r\n    >\r\n    <a routerLink=\"sign-up\"\r\n      ><button type=\"button\" class=\"btn btn-primary\">Sign-up</button></a\r\n    >\r\n  </div>\r\n\r\n  <div class=\"col-md-3 text-end\" *ngIf=\"authed\">\r\n    <a routerLink=\"\">\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn btn-outline-primary me-2\"\r\n        (click)=\"logout()\"\r\n      >Logout</button></a>\r\n  </div>\r\n</header>\r\n{{message}}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}