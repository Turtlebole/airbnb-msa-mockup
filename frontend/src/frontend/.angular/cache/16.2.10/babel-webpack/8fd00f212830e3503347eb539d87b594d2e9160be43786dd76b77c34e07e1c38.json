{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { Emitters } from './emitters/emitters';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./nav-bar/nav-bar.component\";\nexport class AppComponent {\n  constructor(http, userService) {\n    this.http = http;\n    this.userService = userService;\n    this.title = 'home';\n    this.message = '';\n  }\n  ngOnInit() {}\n  getUserData(token) {\n    const httpOptions = {\n      headers: new HttpHeaders({\n        Authorization: 'Bearer ' + token\n      }),\n      withCredentials: true\n    };\n    this.http.get('https://localhost/api/user/users/get', httpOptions).subscribe(res => {\n      console.log(res);\n      this.message = `Welcome ${res.first_name}`;\n      Emitters.authEmitter.emit(true);\n      this.userService.updateUser(res); // Notify other components about the user update\n    }, err => {\n      console.log(err);\n      this.message = 'You are not logged in';\n      Emitters.authEmitter.emit(false);\n    });\n  }\n  static #_ = this.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 5,\n    vars: 0,\n    consts: [[1, \"container\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\", \"integrity\", \"sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN\", \"crossorigin\", \"anonymous\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"link\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"app-nav-bar\")(4, \"router-outlet\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    dependencies: [i3.RouterOutlet, i4.NavBarComponent],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["HttpHeaders","Emitters","AppComponent","constructor","http","userService","title","message","ngOnInit","getUserData","token","httpOptions","headers","Authorization","withCredentials","get","subscribe","res","console","log","first_name","authEmitter","emit","updateUser","err","_","i0","ɵɵdirectiveInject","i1","HttpClient","i2","UserService","_2","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd"],"sources":["C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\app.component.ts","C:\\Users\\babic\\OneDrive\\Desktop\\airbnb projekat\\airbnb-sit\\frontend\\src\\app\\app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Emitters } from './emitters/emitters';\r\nimport { UserService } from './user.service';\r\nimport { NgForm } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'home';\r\n  message = '';\r\n\r\n  constructor(private http: HttpClient, private userService: UserService) {\r\n    \r\n  }\r\n\r\n  ngOnInit(): void {\r\n   \r\n  }\r\n\r\n  getUserData(token: string): void {\r\n    const httpOptions = {\r\n      headers: new HttpHeaders({\r\n        Authorization: 'Bearer ' + token,\r\n      }),\r\n      withCredentials: true,\r\n    };\r\n\r\n    this.http\r\n      .get<any>('https://localhost/api/user/users/get', httpOptions)\r\n      .subscribe(\r\n        (res: any) => {\r\n          console.log(res);\r\n          this.message = `Welcome ${res.first_name}`;\r\n          Emitters.authEmitter.emit(true);\r\n          this.userService.updateUser(res); // Notify other components about the user update\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n          this.message = 'You are not logged in';\r\n          Emitters.authEmitter.emit(false);\r\n        }\r\n      );\r\n  }\r\n\r\n  \r\n}\r\n","<div class=\"container\">\r\n  <head>\r\n  <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN\" crossorigin=\"anonymous\">\r\n</head>\r\n<app-nav-bar></app-nav-bar>\r\n\r\n<router-outlet></router-outlet>\r\n\r\n\r\n\r\n"],"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;AAC9D,SAASC,QAAQ,QAAQ,qBAAqB;;;;;;AAS9C,OAAM,MAAOC,YAAY;EAIvBC,YAAoBC,IAAgB,EAAUC,WAAwB;IAAlD,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IAHzD,KAAAC,KAAK,GAAG,MAAM;IACd,KAAAC,OAAO,GAAG,EAAE;EAIZ;EAEAC,QAAQA,CAAA,GAER;EAEAC,WAAWA,CAACC,KAAa;IACvB,MAAMC,WAAW,GAAG;MAClBC,OAAO,EAAE,IAAIZ,WAAW,CAAC;QACvBa,aAAa,EAAE,SAAS,GAAGH;OAC5B,CAAC;MACFI,eAAe,EAAE;KAClB;IAED,IAAI,CAACV,IAAI,CACNW,GAAG,CAAM,sCAAsC,EAAEJ,WAAW,CAAC,CAC7DK,SAAS,CACPC,GAAQ,IAAI;MACXC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChB,IAAI,CAACV,OAAO,GAAG,WAAWU,GAAG,CAACG,UAAU,EAAE;MAC1CnB,QAAQ,CAACoB,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC;MAC/B,IAAI,CAACjB,WAAW,CAACkB,UAAU,CAACN,GAAG,CAAC,CAAC,CAAC;IACpC,CAAC,EACAO,GAAG,IAAI;MACNN,OAAO,CAACC,GAAG,CAACK,GAAG,CAAC;MAChB,IAAI,CAACjB,OAAO,GAAG,uBAAuB;MACtCN,QAAQ,CAACoB,WAAW,CAACC,IAAI,CAAC,KAAK,CAAC;IAClC,CAAC,CACF;EACL;EAAC,QAAAG,CAAA,G;qBAnCUvB,YAAY,EAAAwB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,WAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAZ9B,YAAY;IAAA+B,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,sBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCXzBb,EAAA,CAAAe,cAAA,aAAuB;QAErBf,EAAA,CAAAgB,SAAA,cAAkN;QACpNhB,EAAA,CAAAiB,YAAA,EAAO;QACPjB,EAAA,CAAAgB,SAAA,kBAA2B;QAJ3BhB,EAAA,CAAAiB,YAAA,EAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}